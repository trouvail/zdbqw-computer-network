# 2022——`计算机网络`第一次书面作业

> **学号：2013921  
姓名：周延霖  
专业：信息安全**


## 第一章问题


***网络结构如下图所示，主机A与主机B之间通过两段链路和一台转发设备R进行连接，每条链路的长度和传输速率已经在图中标出，R采用存储转发机制。主机A向主机B发送一个长度为10000字节的报文，请回答以下问题（设电磁波传播速度为2\*10^8米/秒）***


![](https://i.imgtg.com/2022/11/23/4igLq.png)


> 题目一


***如果采用报文交换，请计算端到端的最小时延，即从主机A传输报文的第一位开始，到主机B接收到报文的最后一位为止所用的时间。***

解答如下：

![](https://i.imgtg.com/2022/11/23/4idPg.jpg)


> 题目二

***如果将报文分成5个报文分组传输，请计算完成报文传输的最小端到端时延（忽略报文分组的封装开销）。***


第二题中的大部分都和上一道题类似，只是将一个数据报分为5个来发，可以从示意图中看出不论是从A发向R还是从R发向B的数据报的传播时延（因为从一个地方发向另外一个地方的时间是没有办法省略的）都是没有变化的，而第二部分的传输时延由于可以在前四个数据报发来后直接先进行发送，所以第二部分的传输时延变为原先的五分之一，第一部分的传输时延不变，于是借助第一题的数据列出公式如下图所示：（结果也将一并给出）

![](https://i.imgtg.com/2022/11/23/4is9B.jpg)



**可以看出相比于第一题的端到端时延还是减少很大的！**




> 时延分析

***在统计多路复用机制中，端到端的时延具有不确定性，请简要分析影响端到端时延的主要因素。***

端到端时延可以分为节点处理时延（Nodal Processing Delay）、排队时延(Queuing Delay)、传输时延(Transmission Delay)、传播时延(Propagation)。而这些时延是影响端到端实验的主要因素。

**`节点处理时延：`**

检查分组首部和决定将该分组导向何处所需要的时间是节点处理时延的一部分。处理时延也包括其他因素，如检查比特级差错所需要的时间，该差错出现在这些分组比特从上游节点向路由器A传输的过程中。高速路由器的处理时延通常是微秒或更低的数量级。在这种节点处理之后，路由器将该分组引向通往路由器B链路之前的队列，处理时延通常影响不大。

**`排队时延：`**

在队列中，当分组在链路上等待传输时，它经受排队时延。一个特定分组的排队时延将取决于先期到达的、正在排队等待向链路传输的分组的数量。如果该队列是空的，并且当前没有其他分组在传输，则该分组的排队时延为0。另一方面，如果流量很大，并且许多其他分组也在等待传输，该排队时延将很大。到达组的分组数量是到达该队列的`流量强度`和性质的函数。实际的排队时延通常在毫秒到微秒级。判断排队延时的大小时，结果很大程度取决于流量到达该队列的速率、链路的传输速率和到达流量的性质（即流量是周期性到达还是以突发形式到达）。丢包也会影响排队时延。排队时延对网络性能可能会产生较大的影响，因此需要拥塞控制。

**`传输时延：`**

假定分组以先到先服务的方式传输——这在分组交换网络中是常见的方式，仅当所有已经到达的分组被传输后，才能传输我们的分组。用L比特表示分组的长度，用R bps表示从路由器A到路由器B的链路传输速率。发送时延是L/R。这是将所有分组比特推向链路所需要的时间。实际的传输时延通常在毫秒到微秒级，对于LAN等高速信道来说它微不足道，但对于通过低速拨号调制解调器链路发送的长因特网分组来说可能达到几百毫秒。

**`传播时延：`**

一旦一个比特被推向链路，该比特需要向路由器B传播，从该链路的起点到路由器B的传播所需要的时间是传播时延。该比特以该链路的传播速率传播，该传播速率取决于该链路的物理媒介，其等于或略小于光速。传播时延等于两台路由器之间的距离除以传播速率，即传播时延是d/s，其中d是两台路由器之间的距离，s是该链路的传播速率。传播时延在毫秒级。很难被提升，对于卫星链路互联的两台路由器来说可能是几百毫秒，占时延的主要成分；但对于同一个局域网如校园网下连接同一台路由器的链路它的时延很小。

**`其他时延：`**

另外，端到端的时延可能还有一些其他重要的时延，比如希望项共享媒体传输分组的端系统可能有意地延迟它的传输把它作为它与其他端系统共享媒体协议的一部分；还有媒体分组化时延，主要出现在IP语音中——分组前必须先编码数据。







## 第二章问题

> 题目一


***通过使用Windows命令行模式提供的nslookup命令查询www.baidu.com的IP地址，给出结果截图，并对返回的结果进行解释。同时，利用Wireshark捕获查询的交互过程，给出结果截图，并进行简要说明。***



1. 查询IP地址截图

   - 首先是在本机的`macOS`系统下使用终端进行查询

   ![](https://i.imgtg.com/2022/11/23/4iPPM.png)

   - 然后是在虚拟机中的`Windows XP`中进行查询

   ![](https://i.imgtg.com/2022/11/23/4iJzr.png)

   - 这里边的服务器代表的是DNS服务器名称（其中由于`Windows XP`是`macOS`环境下运行的VMware虚拟机，所以nslookup未能解析此项）
   - address表示的是DNS服务器地址
   - 名称代表显示的是百度原来的网址
   - 剩下的Addresses是百度的IP地址。可以看出，这是一个IPV4协议的地址；182表明网络类型为B类。
   - Aliaes代表目标域名

2. 利用Wireshark捕获交互过程

   ![](https://i.imgtg.com/2022/11/23/4iHcD.png)

   ![](https://i.imgtg.com/2022/11/23/4iEOF.png)

   可以看出，首先nslookup本机的IP地址是`10.136.246.195`，服务器地址是`222.30.45.41`，使用的是DNS协议。本机首先向服务器发出查询请求，然后服务器解析IP找到主机，做出响应。接着，主机向服务器发送查询www.baidu.com.localdomian的IPV4信息的对应请求，服务器接受到请求后作出响应。之后，服务器做出应答，为B类域名，网址为www.baidu.com.localdomain，CNAME为其别名 www.a.shhifen.com ，IP地址为`182.61.200.7`。同时还可以看出，DNS为应用层协议，下层传输层采用UDP，再下层网络层是IPV4协议。响应时间为`0.002728000 seconds`。





> 题目二

***以反复解析为例，说明域名解析的基本工作过程（可以结合图例）。给出内容分发网络（CDN）中DNS重定向的基本方法，说明原始资源记录应该如何修改，并描述重定向过程。***

![](https://i.imgtg.com/2022/11/23/4iG76.png)

1. 主机想知道某个域名的IP地址，先查缓存是否存在。若存在直接返回，若不存在向DNS服务器发送一个DNS查询报文，该报文包含被查询的域名。
2. 若本地DNS缓存中存在该IP地址的映射，则直接跳到第8步，否则本地DNS服务器将该报文转发到根DNS服务器，执行第三步。
3. 根DNS服务器观察其所属的TLD服务器，并向本地DNS服务器返回负责该域名的TLD的IP地址列表。
4. 本地DNS服务器向这些TLP服务器之一发送查询报文。
5. 该TLD服务器观察其所属的权威DNS服务器，并用该权威DNS服务器的地址作出响应，发回本地DNS服务器。
6. 本地DNS再向该权威DNS服务发送查询报文。
7. 权威DNS服务器根据该域名进行查询，用该域名的IP地址进行响应，发回本地DNS服务器。本地DNS服务器缓存中存入该域名到IP地址的映射。
8. 本地DNS服务器将该IP地址返回请求主机，请求主机缓存该域名到IP地址的映射。至此，查询结束，一共发送了8分报文（4份查询报文和4份回答报文）。

> 题目三

***在DNS域名系统中，域名解析时使用UDP协议提供的传输层服务（DNS服务器使用UDP的53端口），而UDP提供的是不可靠的传输层服务，请你解释DNS协议应如何保证可靠机制。***

UDP提供不可靠的传输服务，在域名解析时的可靠性须由应用层保障。

而在DNS应用层，其报文格式中包括了问题的数量、回答的数量，可以用来进行一定的校验。返回的报文中，也包含着发送过去的问题，可对匹配程度进行一定比较。

报文中还包含了DNS响应的数目、权威名称服务器数目以及权威名称服务器对应IP地址的数目，也可进行一定的校验。

同时，DNS报文还有以秒为单位的生存周期，一般用于当地址解析程序取出资源记录后決定保存及使用缓存数据的时间。**当生存周期过期后，会重新请求更新，以保证数据的正确性**。

DNS协议还会通过冗余设置，避免单点失效。具体来说，多个为保证高可用性，会有多台权威服务器冗余支持每个区域。某个区域的资源记录通过手动或自动方式更新到单个主权威服务器上，其它冗余名称服务器用作同一区域中主服务器的备份服务器，以防主服务器无法访问或宕机。辅`DNS`服务器定期与主`DNS`服务器通讯，确保它的区域信息保持最新。

综上来看，若本机请求的IP发生错误，则会链接不上网址，发出再次请求，进行正确更新。而高层的DNS服务器则是通过冗余性和定期更新来保证可靠机制。

基本上来说，只要高层DNS服务器保证了正确性，就不会发生较大的错误。